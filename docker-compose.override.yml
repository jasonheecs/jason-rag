---
services:
  api:
    build:
      context: ./src/backend
    volumes:
      - ./src/backend:/code
    command:
      [
        "uvicorn",
        "api.main:app",
        "--host",
        "0.0.0.0",
        "--port",
        "80",
        "--reload",
      ]

  ingestion:
    build:
      context: ./src/backend
    volumes:
      - ./src/backend:/code

  ui:
    build:
      context: ./src/frontend
    volumes:
      - ./src/frontend:/app
    entrypoint:
      [
        "streamlit",
        "run",
        "app.py",
        "--server.port=8501",
        "--server.address=0.0.0.0",
        "--server.runOnSave=true",
        "--server.fileWatcherType=poll",
      ]
